# 锁
本章介绍PostgreSQL的锁的知识

锁实际上就是一小段共享内存。

## 自旋锁SpinLock
自旋锁

## 轻量级锁Lightweight Lock
轻量级锁Lightweight Lock

毫无疑问，依赖于硬件的SpinLock机制肯定比不依赖于硬件的SpinLock机制速度快。因为不依赖于硬件的SpinLock机制需要使用PG信号量来仿真SpinLock。如果机器拥有TAS(test-and-set)指令集，那么PostgreSQL会使用s_lock.h和s_lock.c中定义的SpinLock实现机制。如果机器没有TAS指令集，那么不依赖于硬件的SpinLock的实现定义在Spin.c中。需要用到PostgreSQL定义的信号量PGSemaphore。
