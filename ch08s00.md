# 事务和Vacuum 

## 事务

注意

### 事务标识(Transaction ID)


```
postgres=# BEGIN;
BEGIN
postgres=*# SELECT txid_current();
 txid_current
--------------
          742
(1 row)

```

![](d0059.svg)

```c
/* in src/include/access/htup_details.h */
struct HeapTupleHeaderData {
    union {
        HeapTupleFields t_heap;
        DatumTupleFields t_datum;
    } t_choice;

    ItemPointerData t_ctid;         /* current TID of this or newer tuple (or a
                                                             * speculative insertion token) */
    /* Fields below here must match MinimalTupleData! */

#define FIELDNO_HEAPTUPLEHEADERDATA_INFOMASK2 2
    uint16          t_infomask2;    /* number of attributes + various flags */

#define FIELDNO_HEAPTUPLEHEADERDATA_INFOMASK 3
    uint16          t_infomask;             /* various flag bits, see below */

#define FIELDNO_HEAPTUPLEHEADERDATA_HOFF 4
    uint8           t_hoff;                 /* sizeof header incl. bitmap, padding */
    /* ^ - 23 bytes - ^ */
#define FIELDNO_HEAPTUPLEHEADERDATA_BITS 5
    bits8           t_bits[FLEXIBLE_ARRAY_MEMBER];  /* bitmap of NULLs */
    /* MORE DATA FOLLOWS AT END OF STRUCT */
};
```


## Vacuum


